{% extends "base.html" %}
{% block content %}
<div class="flex items-center justify-between">
  <h2 class="text-2xl font-semibold">Admin â€” Swap requests</h2>
  <div class="text-sm text-gray-600">Approve or reject student requests</div>
</div>

<div class="mt-4 grid md:grid-cols-2 gap-4">
  {% for s in swaps %}
  <div class="bg-white border rounded p-4">
    <div class="flex items-center justify-between">
      <div class="text-gray-700">{{ s.user.email }}</div>
      <div class="text-xs px-2 py-1 rounded bg-gray-100">{{ s.status }}</div>
    </div>
    <div class="mt-3">
      <div class="text-sm font-medium">Giving</div>
      <div class="mt-1 flex flex-wrap gap-2">
        {% for m in s.giving %}
          <span class="px-2 py-1 rounded bg-blue-50 text-blue-700 text-sm border border-blue-200">{{ m.code }}</span>
        {% endfor %}
      </div>
    </div>
    <div class="mt-3">
      <div class="text-sm font-medium">Wanting</div>
      <div class="mt-1 flex flex-wrap gap-2">
        {% for m in s.wanting %}
          <span class="px-2 py-1 rounded bg-emerald-50 text-emerald-700 text-sm border border-emerald-200">{{ m.code }}</span>
        {% endfor %}
      </div>
    </div>
    <div class="mt-4 flex gap-2 justify-end">
      <form method="post" action="/admin/swaps/{{ s.id }}/status">
        <input type="hidden" name="status" value="Approved">
        <button class="px-3 py-1.5 rounded bg-green-600 text-white">Approve</button>
      </form>
      <form method="post" action="/admin/swaps/{{ s.id }}/status">
        <input type="hidden" name="status" value="Rejected">
        <button class="px-3 py-1.5 rounded bg-red-600 text-white">Reject</button>
      </form>
    </div>
  </div>
  {% else %}
  <div class="md:col-span-2 bg-white border rounded p-6">No swap requests found.</div>
  {% endfor %}
</div>
{% endblock %}